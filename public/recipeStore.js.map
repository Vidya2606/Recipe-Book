{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/recipeStore.js"],"names":["errMsgs","appState","convertError","response","ok","json","then","err","Promise","reject","showError","document","getElementById","innerHTML","getAndShowRecipiesList","fetch","method","error","recipes","showRecipiesList","innerHtmlForRecipeList","recpIndex","length","id","title","userInteractivePart","recpItems","getElementsByClassName","itm","onclick","event","getAndShowRecipe","target","isUserLoggedIn","login","undefined","username","value","replace","reqBody","headers","body","JSON","stringify","setUserButtons","logout","homePage","addAndShowRecipe","ingredients","instructions","isNotNullOrSpaces","recipe","addRecipe","page","userContentPart","saveRecipeButton","addEventListener","preventDefault","recipeId","showRecipe","recipePart","author","pageType","buttonPart","logoutButton","addRecipeButton","homeButton","userNameInput","loginButton","stringVar"],"mappings":"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","file":"recipeStore.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/recipeStore.js\");\n","(function() {\n    const errMsgs = {\n        'network-error': 'There was a problem connecting to the network',\n    };\n\n    const appState = {};\n\n    function convertError(response) {\n        if(response.ok){\n            return response.json();\n        }\n        return response.json()\n        .then (err => Promise.reject(err));\n    };\n    function showError(err) {\n        document.getElementById(\"error-message\").innerHTML = err;\n    };\n\n    function getAndShowRecipiesList() {\n        fetch(`/recipe`, {\n            method: 'GET',\n        })\n        .catch(() => Promise.reject({ error: 'network-error' }))\n        .then( convertError )\n        .then( recipes => {\n            showError(\"\");\n           showRecipiesList(recipes);\n        })\n        .catch( err => {\n            showError(errMsgs[err.error] || err.error);\n        });\n    };\n\n    function showRecipiesList(recipes) {\n        let innerHtmlForRecipeList = '<div>\\n';\n        for (let recpIndex = 0; recpIndex < recipes.length; recpIndex++) {\n            innerHtmlForRecipeList = innerHtmlForRecipeList + '<div class=\"recipe-item\" id=\"' + recipes[recpIndex].id +'\">' + recipes[recpIndex].title  + '</div>';\n        }\n        innerHtmlForRecipeList = innerHtmlForRecipeList + '</div>\\n';\n        let userInteractivePart = document.getElementById(\"page-content\");\n        userInteractivePart.innerHTML = innerHtmlForRecipeList;\n\n        // Set onClick for recipe items in the list.\n        let recpItems = document.getElementsByClassName(\"recipe-item\");\n        for (let itm = 0; itm < recpItems.length; itm++) {\n            recpItems[itm].onclick = function(event) {\n                getAndShowRecipe(event.target.id);\n            };\n        };\n    };\n\n    function isUserLoggedIn() {\n        if (appState.login === undefined) {\n            return false;\n        }\n        return appState.login;\n    };\n\n    function login() {\n        let username = document.getElementById(\"username\").value;\n        if(username === undefined || username.length < 1 || username.replace(/\\s/g, '').length < 1) {\n            showError(\"bad login\");\n            return;\n        }\n        let reqBody = {};\n        reqBody.username = username;\n        fetch(`/session`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n              },\n            body: JSON.stringify(reqBody)\n        })\n        .catch( () => Promise.reject ({ error: 'user-unknown' }))\n        .then(convertError)\n        .then((response) => {\n            appState.login = true;\n            showError(\"\");\n            setUserButtons();\n        })\n        .catch(err => {\n            showError(errMsgs[err.error] || err.error);\n        });\n    };\n\n    function logout() {\n        fetch(`/session`, {\n            method: 'DELETE',\n        })\n        .catch( () => Promise.reject( { error: 'network-error' }))\n        .then(convertError)\n        .then( (response) => {\n            appState.login = false;\n            showError(\"\");\n            homePage();\n        })\n        .catch(err => {\n            appState.login = false;\n            showError(\"\");\n            homePage();\n        });\n    };\n\n    function addAndShowRecipe() {\n        let title = document.getElementById(\"recipe-title\").value;\n        let ingredients = document.getElementById(\"recipe-ingredients\").value;\n        let instructions = document.getElementById(\"recipe-instructions\").value;\n        \n        if(isNotNullOrSpaces(title) \n            && isNotNullOrSpaces(ingredients)\n            && isNotNullOrSpaces(instructions)) {\n            let reqBody = {};\n            reqBody.title = title;\n            reqBody.ingredients = ingredients;\n            reqBody.instructions = instructions;\n            fetch(`/recipe`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                  },\n                body: JSON.stringify(reqBody)\n            })\n            .catch(() => Promise.reject({ error: 'network-error'}))\n            .then(convertError)\n            .then( recipe => {\n                showError(\"\");\n                addRecipe();\n            })\n            .catch( err => {\n                showError(errMsgs[err.error] || err.error);\n            });\n        } else {\n            showError(\"recipe details must not be empty\");\n        }\n    };\n\n    function addRecipe() {\n        appState.page = 'addrecipe';\n        let addRecipe = '<div class=\"recipe-part\">\\n';\n        addRecipe = addRecipe + '<div><input type=\"text\" name=\"text\" class=\"recipe-title\" id=\"recipe-title\" width=\"80%\" placeholder=\"Add a title for your recipe\"></textarea></div><br>';\n        addRecipe = addRecipe + '<div class=\"recipe-titles\"> Ingredients</div>';\n        addRecipe = addRecipe + '<div><textarea name=\"text\" class=\"recipe-ingredients\" id=\"recipe-ingredients\" placeholder=\"Add all ingredients\"></textarea></div><br>';\n        addRecipe = addRecipe + '<div class=\"recipe-titles\"> Instructions</div>';\n        addRecipe = addRecipe + '<div><textarea name=\"text\" class=\"recipe-instructions\" id=\"recipe-instructions\" placeholder=\"Add instructions\"></textarea></div><br>';\n        addRecipe = addRecipe + '<div><button class=\"user-button\" id=\"save-recipe\">Submit</button></div>';\n        addRecipe = addRecipe + '</div>';\n\n        let userContentPart = document.getElementById(\"page-content\");\n        userContentPart.innerHTML = addRecipe;\n\n        let saveRecipeButton = document.getElementById(\"save-recipe\");\n        saveRecipeButton.addEventListener('click', (event) => {\n            event.preventDefault();\n            addAndShowRecipe();\n        });\n        setUserButtons();\n    };\n\n    function getAndShowRecipe(recipeId) {\n        // get and show Recipe;\n        fetch(`/recipe/${recipeId}`, {\n            method: 'GET',\n        })\n        .catch(() => Promise.reject({ error: 'network-error' }))\n        .then( convertError )\n        .then( recipe => {\n            showError(\"\");\n           showRecipe(recipe);\n        })\n        .catch( err => {\n            showError(errMsgs[err.error] || err.error);\n        });\n    };\n\n    function showRecipe(recipe) {\n        appState.page = 'recipe';\n        let recipePart = '<div class=\"recipe-part\">\\n';\n        recipePart = recipePart + '<div class=\"recipe-title\">' + recipe.title + '</div>\\n';\n        recipePart = recipePart + '<div class=\"recipe-author\">' + recipe.author + '</div>\\n';\n        recipePart = recipePart + '<div class=\"recipe-titles\"> Ingredients</div>';\n        recipePart = recipePart + '<div class=\"recipe-ingredients\">' + recipe.ingredients + '</div>\\n';\n        recipePart = recipePart + '<div class=\"recipe-titles\"> Instructions</div>';\n        recipePart = recipePart + '<div class=\"recipe-instructions\">' + recipe.instructions + '</div>\\n';\n        recipePart = recipePart + '</div>';\n\n        let userContentPart = document.getElementById(\"page-content\");\n        userContentPart.innerHTML = recipePart;\n        setUserButtons();\n    };\n\n    function setUserButtons() {\n        let pageType = appState.page;\n        let buttonPart = document.getElementById(\"user-buttons\");\n        if (isUserLoggedIn()) {\n            let logoutButton = '<button class=\"user-button\" id=\"logout\">Logout</button>';\n            if (pageType === 'home') {\n                let addRecipeButton = '<button class=\"user-button\" id=\"addrecipe\">Add Recipe</button>';\n                buttonPart.innerHTML = '<span>' + addRecipeButton + logoutButton + '</span>';\n\n                document.getElementById(\"addrecipe\").addEventListener('click', (event) => {\n                    event.preventDefault();\n                    addRecipe();\n                });\n            } else {\n                let homeButton = '<button class=\"user-button\" id=\"returntohome\">Home</button>';\n                buttonPart.innerHTML = '<span>' + homeButton + logoutButton + '</span>';\n\n                document.getElementById(\"returntohome\").addEventListener('click', (event) => {\n                    event.preventDefault();\n                    homePage();\n                });\n            }    \n            document.getElementById(\"logout\").addEventListener('click', (event) => {\n                event.preventDefault();\n                logout();   \n            });\n        } else {\n            let userNameInput = '<input class=\"user-name-input\" id=\"username\" placeholder=\"Username\"></input>';\n            let loginButton = '<button class=\"user-button\" id=\"login\">Login</button>';\n            if (pageType === 'home') {\n                buttonPart.innerHTML = '<span>' + userNameInput + loginButton + '</span>';\n            } else {\n                let homeButton = '<button class=\"user-button\" id=\"returntohome\">Home</button>';\n                buttonPart.innerHTML = '<span>' + homeButton + userNameInput + loginButton + '</span>';\n\n                document.getElementById(\"returntohome\").addEventListener('click', (event) => {\n                    event.preventDefault();\n                    homePage();\n                });\n            }\n            document.getElementById(\"login\").addEventListener('click', (event) => {\n                event.preventDefault();\n                login();   \n            });\n        }\n    };\n\n    function isNotNullOrSpaces(stringVar) {\n        if (stringVar === null || stringVar === undefined || stringVar.replace(/\\s/g, '').length < 1) {\n            return false;\n        }\n        return true;\n    };\n    //Home page \n    function homePage() {\n        appState.page = \"home\";\n        setUserButtons();\n        getAndShowRecipiesList();\n    };\n    \n    // Set initial state\n    appState.page = \"home\";\n    appState.login = false;\n\n    fetch(`/session`, {\n        method: 'GET',\n    })\n    .catch(() => Promise.reject({ error: 'network-error' }))\n    .then (convertError)\n    .then( username => {\n        appState.login = true;\n        homePage();\n    })\n    .catch( err => {\n        homePage();\n    });\n})();"],"sourceRoot":""}